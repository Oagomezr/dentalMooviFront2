<app-header></app-header>
<app-direction [currentPageOrProduct]="currentPage" [locationCategory]="locationCategory"></app-direction>
<!-- <div class="category-direction">
    <div class="category-section">
        <a href="/" class="init-location">INICIO</a>
        <span class="location-category">
            <div>{{ currentPage }}</div> <i class="material-icons" *ngIf="currentPage">arrow_right</i>
            <div *ngFor="let parentCategory of locationCategory; let i = index">
                <i class="material-icons">arrow_right</i><a [href]="'/category/'+locationCategory.slice(i)" [ngClass]="'location-'+(locationCategory.length-1-i)">{{parentCategory}}</a>
            </div>
        </span>
    </div>
    <div [ngClass]="'location-'+(locationCategory.length-1)" id="current-section">{{locationCategory[0]}}</div>
</div> -->
<div class="search-products">
    <ul class="categories">
        <ng-template #recursiveList let-categories>
            <li *ngFor="let category of categories">
                
                <div>
                    <a [href]="'/category/'+category.categoryAndParents" [ngClass]="{'currentCategory': locationCategory[0] == category.categoryAndParents[0], 'otherCategory': locationCategory[0] != category.categoryAndParents[0]}">{{ category.categoryAndParents[0] }}<span *ngIf="locationCategory[0] == category.categoryAndParents[0]">&nbsp;{{'<-'}}</span></a>
                    <button (click)="toggleSubcategories(category.categoryAndParents, false)" *ngIf="category.childrenCategories?.length > 0">
                        <i class="material-icons" [ngClass]="{'expanded-icon': expandedCategories[category.categoryAndParents[0]], 'no-expanded-icon': !expandedCategories[category.categoryAndParents[0]]}">expand_more</i>
                    </button>
                </div>
                
                <ul *ngIf="category.childrenCategories?.length > 0 && expandedCategories[category.categoryAndParents[0]]" [ngClass]="'lvl-'+(category.categoryAndParents.length)">
                    <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: category.childrenCategories }"></ng-container>
                </ul>
            </li>
        </ng-template>
        <ng-container *ngTemplateOutlet="recursiveList; context:{ $implicit: categories }"></ng-container>
    </ul>
    <app-products (sendCurrentPage)="receiveCurrentPage($event)" [locationCategory]="locationCategory"></app-products>
</div>