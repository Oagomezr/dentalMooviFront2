<app-header></app-header>

<div *ngIf="!confirm" class="all-page">
    <h2>REGISTRO</h2>
    <form (ngSubmit)="sendCode()" [formGroup]="userFormGroup">
    
        <div class="names">
            <mat-form-field>
                <mat-label >Nombres</mat-label>
                <input matInput formControlName="firstName">
                <mat-error *ngIf="userFormGroup.get('firstName')?.errors?.['required']">Por favor ingresa tu nombre</mat-error>
                <mat-error *ngIf="userFormGroup.get('firstName')?.errors?.['pattern']">Los nombres no puede tener comas, numeros o caracteres especiales(#, $, ~, etc).</mat-error>
            </mat-form-field>
        
            <mat-form-field>
                <mat-label >Apellidos</mat-label>
                <input matInput formControlName="lastName">
                <mat-error *ngIf="userFormGroup.get('lastName')?.errors?.['required']">Por favor ingresa tu apellido</mat-error>
                <mat-error *ngIf="userFormGroup.get('lastName')?.errors?.['pattern']">Los apellidos no pueden tener comas, numeros o caracteres especiales(#, $, ~, etc).</mat-error>
            </mat-form-field>
        </div>
        
        
        <mat-form-field>
            <mat-label >Correo electr贸nico</mat-label>
            <input type="email" matInput formControlName="email">
            <mat-error *ngIf="userFormGroup.get('email')?.errors?.['required']">Por favor ingresa el correo electr贸nico</mat-error>
            <mat-error *ngIf="userFormGroup.get('email')?.errors?.['email']">El email debe contener un @</mat-error>
            <mat-error *ngIf="userFormGroup.get('email')?.errors?.['uniqueValue']">Ese email actualmente se encuentra registrado</mat-error>
        </mat-form-field>

        <div class="birth-gender">
            
            <app-birth [formBirthDate]="userFormGroup.controls.birthday"></app-birth>
            <app-select-gender [formGender]="userFormGroup.controls.gender"></app-select-gender>
        </div>

        <div class="celphone-password">
            <app-cel-phone [formCelphone]="userFormGroup.controls.celPhone"></app-cel-phone>
            <app-password [formPassword]="userFormGroup.controls.password"></app-password>
        </div> 
    
        <button type="submit" mat-raised-button color="primary" [disabled]="userFormGroup.invalid">Crear usuario</button>
    </form>
</div>

<div *ngIf="confirm && !showRegisterOK" class="confirmation-code">
    <h2>Acabamos de enviar un codigo de confirmaci贸n de registro a tu correo</h2>
    <div class="code">
        <input type="text" maxlength="1" (input)="typeCode(0, $event)" />
        <input type="text" maxlength="1" (input)="typeCode(1, $event)" />
        <input type="text" maxlength="1" (input)="typeCode(2, $event)" />
        <input type="text" maxlength="1" (input)="typeCode(3, $event)" />
        <input type="text" maxlength="1" (input)="typeCode(4, $event)" />
        <input type="text" maxlength="1" (input)="typeCode(5, $event)" />
    </div>
    <div class="buttons" >
        <button mat-raised-button color="primary" (click)="confirmCode()">Confirmar</button>
        <button mat-raised-button color="primary" [disabled]="waitTime > 0" (click)="sendCode()">
            Reenviar codigo <span id="tiempoRestante" *ngIf="waitTime > 0">en {{waitTime}} segundos</span>
        </button>
    </div>

</div>

<div class="registerOK" *ngIf="showRegisterOK">
    <img src="assets/images/registerOK.png" alt="registerOK">
    <h2>Registro exitoso</h2>
    <p>Te estamos redirigiendo al inicio de sesi贸n</p>
</div>


